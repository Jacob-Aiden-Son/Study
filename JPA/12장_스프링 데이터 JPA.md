# 12.1 스프링 데이터 JPA 소개
- 데이터 접근 계층을 개발할 때 구현 클래스 없이 인터페이스만 작성해도 개발을 완료할 수 있다
- 스프링 데이터 JPA는 메소드 이름을 분석해서 JPQL을 실행한다

## 12.1.1 스프링 데이터 프로젝트
- 다양한 데이터 저장소에 대한 접근을 추상화해서 개발자 편의를 제공하고 지루하게 반복하는 데이터 접근 코드를 줄여준다

# 12.2 스프링 데이터 JPA 설정
스킵

# 12.3 공통 인터페이스 기능
- 스프링 데이터 JPA를 사용하는 가장 단순한 방법은 JpaRepository 인터페이스 상속받는 것
- 제네릭에 엔티티 클래스와 엔티티 클래스가 사용하는 식별자 타입을 지정
- 주요 메소드
  - save
  - delete
  - findOne 엔티티 하나 조회
  - getOne 엔티티를 프록시로 조회
  - findAll

# 12.4 쿼리 메소드 기능
## 12.4.1 메소드 이름으로 쿼리 생성
- 정해진 규칙에 따라서 메소드 이름을 지어야함
  - 표 12.1 참고

## 12.4.2 JPA NamedQuery
- 쿼리에 이름을 부여해서 사용하는 방법
- @Param : 이름기반 파라미터를 바인딩할 때 사용하는 어노테이션

## 12.4.3 @Query, 리포지토리 메소드에 쿼리 정의
- @Query : 직접 쿼리를 정의
  - 네이티브 SQL을 사용하려면 nativeQuery = true 설정

## 12.4.4 파라미터 바인딩
- 스프링 데이터 JPA 는 위치 기반 파라미터 바인딩과 이름 기반 파라미터 바인딩을 모두 지원

## 12.4.5 벌크성 수정 쿼리
- 벌크성 수정, 삭제 쿼리는 `@Modifying` 어노테이션 사용
- 벌크성 쿼리를 실행하고 나서 영속성 컨텍스트를 초기화하고 싶으면 @Modifying 의 clearAutomatically 옵션을 true 로 설정

## 12.4.6 반환 타입
- 결과가 한 건 이상이면 컬렉션 인터페이스 사용, 단건이면 반환타입 지정
- 조회 결과가 없으면 컬렉션은 빈 컬렉션, 단건은 null 반환

## 12.4.7 페이징과 정렬
- 파라미터에 Pageable을 사용하면 반환타입으로 List나 Page를 사용할 수 있다.
- Page를 사용하면 스프링 테이터 JPA 는 페이징 기능을 제공하기 위해 검색된 전체 데이터 건수를 조회하는 count 쿼리를 추가로 호출

## 12.4.8 힌트
- QueryHints 어노테이션을 사용하면 JPA 쿼리 힌트를 사용할 수 있다
- SQL 힌트가 아니라 JPA 구현체에게 제공하는 힌트

## 12.4.9 Lock
- 쿼리 시 락을 걸려면 Lock 어노테이션을 사용

# 12.5 명세
- 명세들을 조립할 수 있도록 도와주는 클래스 Specificantions
- where(), and(), or(), not() 메소드 제공
- 명세를 정의하려면 Specification 인터페이스를 구현

# 12.6 사용자 정의 리포지토리 구현
- 우회를 통해 필요한 메소드만 구현할 수 있도록 스프링 데이터 JPA 에서 제공하는 방법
- 클래스 이름 짓는 규칙 : 리포지토리 인터페이스 이름 + Impl
- Impl 대신 다른 이름을 붙이고 싶으면 repository-impl-postfix 속성 변경

# 12.7 Web 확장

## 12.7.1 설정
- 스프링 데이터가 제공하는 Web 확장기능은 SpringDataWebConfiguration 을 스프링빈으로 등록
- JavaConfig 사용시 EnableSpringDataWebSupport 어노테이션 사용

